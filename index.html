<!DOCTYPE html>
<html lang="en">
<head>
	<title>Untitled</title>
	<meta charset="utf-8"/>
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

	<link rel="shortcut icon" type="image/ico" href="favicon.png" />
	<link rel="stylesheet" media="screen, projection" href="css/styles.css" />

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
	<form action="http://159.203.6.69:14984/stripe" method="POST" id="payment-form">
	  <span class="payment-errors"></span>
		<input type="text" name="name" placeholder="Name" />
		<input type="email" name="email" placeholder="Email" />
		<input type="hidden" name="ticket_type" value="student" />
	  <div class="form-row">
	    <label>
	      <span>Card Number</span>
	      <input type="text" size="20" data-stripe="number"/>
	    </label>
	  </div>
	  <div class="form-row">
	    <label>
	      <span>CVC</span>
	      <input type="text" size="4" data-stripe="cvc"/>
	    </label>
	  </div>
	  <div class="form-row">
	    <label>
	      <span>Expiration (MM/YYYY)</span>
	      <input type="text" size="2" data-stripe="exp-month"/>
	    </label>
	    <span> / </span>
	    <input type="text" size="4" data-stripe="exp-year"/>
	  </div>
	  <button type="submit">Submit Payment</button>
	</form>
	<script src="https://js.stripe.com/v2/"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
	  Stripe.setPublishableKey('pk_test_VZPVSdywILB4qPH8LYdsw5il');
		$(function () {
			$('#payment-form').on('submit', function (e) {
				e.preventDefault()
				var $form = $(this)
				$form.find('button').prop('disabled', true)
		    Stripe.card.createToken($form, stripeResponseHandler)
			})
			function stripeResponseHandler(status, response) {
				var $form = $('#payment-form')

				if (response.error) {
					// Show the errors on the form
					$form.find('.payment-errors').text(response.error.message)
					$form.find('button').prop('disabled', false)
				} else {
					// response contains id and card, which contains additional card details
					var token = response.id
					// Insert the token into the form so it gets submitted to the server
					$form.append($('<input type="hidden" name="stripe_token" />').val(token))
					// and submit
					$form.get(0).submit()
				}
			}
		})
	</script>
</body>
</html>
